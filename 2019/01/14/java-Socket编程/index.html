<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>java Socket编程 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="java SOcket编程java最初是作为网络编程，其对网络提供了高度的支持，使得客户端和服务器的沟通变得现实，而在网络编程中，使用最多的就是Socket Socket编程一.网络基础知识1.两台计算机间进行通讯需要以下三个条件：    ip地址，协议，端口号2.TCP/IP协议：是目前世界上应用最为广泛的协议，是以TCP和IP为基础的不同层次上多个协议的集合，也是TCP/IP协议簇，或TCP/">
<meta property="og:type" content="article">
<meta property="og:title" content="java Socket编程">
<meta property="og:url" content="http://yoursite.com/2019/01/14/java-Socket编程/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="java SOcket编程java最初是作为网络编程，其对网络提供了高度的支持，使得客户端和服务器的沟通变得现实，而在网络编程中，使用最多的就是Socket Socket编程一.网络基础知识1.两台计算机间进行通讯需要以下三个条件：    ip地址，协议，端口号2.TCP/IP协议：是目前世界上应用最为广泛的协议，是以TCP和IP为基础的不同层次上多个协议的集合，也是TCP/IP协议簇，或TCP/">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-01-14T07:06:01.605Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="java Socket编程">
<meta name="twitter:description" content="java SOcket编程java最初是作为网络编程，其对网络提供了高度的支持，使得客户端和服务器的沟通变得现实，而在网络编程中，使用最多的就是Socket Socket编程一.网络基础知识1.两台计算机间进行通讯需要以下三个条件：    ip地址，协议，端口号2.TCP/IP协议：是目前世界上应用最为广泛的协议，是以TCP和IP为基础的不同层次上多个协议的集合，也是TCP/IP协议簇，或TCP/">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">个人博客</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-java-Socket编程" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/14/java-Socket编程/" class="article-date">
  <time datetime="2019-01-14T01:39:03.000Z" itemprop="datePublished">2019-01-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      java Socket编程
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="java-SOcket编程"><a href="#java-SOcket编程" class="headerlink" title="java SOcket编程"></a>java SOcket编程</h1><p>java最初是作为网络编程，其对网络提供了高度的支持，使得客户端和服务器的沟通变得现实，而在网络编程中，使用最多的就是Socket</p>
<h2 id="Socket编程"><a href="#Socket编程" class="headerlink" title="Socket编程"></a>Socket编程</h2><h3 id="一-网络基础知识"><a href="#一-网络基础知识" class="headerlink" title="一.网络基础知识"></a>一.网络基础知识</h3><p>1.两台计算机间进行通讯需要以下三个条件：<br>    ip地址，协议，端口号<br>2.TCP/IP协议：<br>是目前世界上应用最为广泛的协议，是以TCP和IP为基础的不同层次上多个协议的集合，也是TCP/IP协议簇，或TCP/IP协议栈   </p>
<pre><code>TCP：传输控制协议   IP：互联网协议
</code></pre><p>3.TCP/IP五层模型<br>应用层：HTTP，FTP，SMTP，Telnet等<br>传输层：TCP/IP<br>网络层：<br>数据链路层：<br>物理层：网线，双绞线，网卡等<br>4.IP地址<br>为实现网络中不用计算机之间的通信，每台计算机都必须有一个唯一的标识符—IP地址。32位二进制<br>5.端口<br>区分一台主机的多个不同应用程序，端口号范围为0-65535，其中0-1023位为系统保留。<br>如：HTTP：80 FTP：21 Telnet：23</p>
<pre><code>IP地址+端口号组成了所谓的Socket，Socket是网络上运行的程序之间双向通信链路的终结点，是TCP和UDP的基础
</code></pre><p>6.Socket套接字：<br>网络上具有唯一标识的IP地址和端口组合在一起才能构成唯一能识别的标识符套接字。<br>Socket原理机制：</p>
<pre><code>通信的两端都有Socket，网络通信其实就是Socket间的通信，数据在两个Socket间通过IO传输。
</code></pre><p>7.java中的网络支持</p>
<pre><code>针对网络通信的不同层次，java提供了不同API，其提供的网络功能有四大类：
InetAddress：用于标识网络上的硬件资源，主要是IP地址                   
URL：统一资源定位符，通过URL可以直接读取或写入网络上的数据
Sockets：使用TCP协议实现的网络通信Socket相关的类
Datagram：使用UDP协议，将数据保存在用户数据报中，通过网络进行通信
</code></pre><h1 id="二-InetAddress"><a href="#二-InetAddress" class="headerlink" title="二.InetAddress"></a>二.InetAddress</h1><p>InetAddress类用于标识网路坡上的硬件资源，标识互联网协议（IP）地址</p>
<pre><code>//获取本机的InetAddress实例
InetAddress address=InetAddress.getLocalHost();
address.getHostName();//获取计算机名
address.getHostAddress();//获取IP地址
byte[] bytes=address.getAddress();//获取字节数组形式的IP地址，以点分隔的四部分
//获取其他主机的InetAddress实例
InetAddress address2=InetAddress.getByName(&quot;其他主机名&quot;);
InetAddress address3=InetAddress.getByName(&quot;IP地址&quot;);
</code></pre><h1 id="三-URL类"><a href="#三-URL类" class="headerlink" title="三.URL类"></a>三.URL类</h1><h2 id="1-URL统一资源定位符，表示Internet上某一资源的地址，协议名：资源名称"><a href="#1-URL统一资源定位符，表示Internet上某一资源的地址，协议名：资源名称" class="headerlink" title="1.URL统一资源定位符，表示Internet上某一资源的地址，协议名：资源名称"></a>1.URL统一资源定位符，表示Internet上某一资源的地址，协议名：资源名称</h2><pre><code>//创建一个URL的实例
URL baidu=new URL(&quot;http://www.baidu.com&quot;);
URL url=new URL(baidu,&quot;/index.html?username=tom#test&quot;)//? 表示参数，#表示锚点
url.getProtocol();//获取协议
url.getHost();//获取主机
url.getPort();//如果没有指定端口号，根据协议不同使用默认端口号。此时getPort()方法的返回值为-1
url.getPath();//获取文件路径
url.getFile();//文件名，包括文件路径+参数
url.getRef();//相对路径，就是锚点，即#号后面的内容
url.getQuery();//查询字符串，即参数
</code></pre><h2 id="2-使用URL读取网页内容"><a href="#2-使用URL读取网页内容" class="headerlink" title="2.使用URL读取网页内容"></a>2.使用URL读取网页内容</h2><p>通过URL对象的openStream()方法可以得到指定资源的输入流，通过流能够读取或则访问网页上的资源</p>
<pre><code>URL url=new URL(&quot;http：//www.baidu.com&quot;);
InputStream is=url.openStream();//通过openStream方法获取资源的字节输入流
InputStreamReader isr=new InputStreamReader(is,&quot;UTF-8&quot;);//将字节输入流转换为字符输入流，如果不指定编码，中文可能会出现乱码
BufferReader br=new BufferedReader(isr);//为字符输入流添加缓冲，提高读取效率
String data=br.readLine();//读取数据
while(data!=null){
    System.out.println(data);
    data=br.readerLine();
}
br.close();
isr.close();
is.close();
</code></pre><h1 id="四-TCP编程"><a href="#四-TCP编程" class="headerlink" title="四.TCP编程"></a>四.TCP编程</h1><p>1.TCP协议是面向连接的，可靠地，有序的，以字节流的方式发送数据，通过三次握手方式建立连接，形成传输数据的通道，在连接中进行大量的数据的传输，效率会稍低<br>2.Java中基于TCP协议实现网络通信的类：（1）客户端的Socket类（2）服务器端的ServerSocket类<br>！<a href="https://github.com/jiashukai/jiakai/blob/master/source/_posts/pictures/socket%E9%80%9A%E4%BF%A1.png" target="_blank" rel="noopener">Image text</a><br>3.Socket通信的步骤<br>（1）创建ServerSocket和Socket（2）打开连接到Socket的输入与输出流<br>（3）按照协议对Socket进行读/写操作（4）关闭输入输出流，关闭Socket<br>4.服务器端：<br>（1）创建ServerSocket对象。绑定监听端口（2）通过accept()方法监听客户端请求<br>（3）连接建立后，通过输入流读取客户端发送的请求消息（4）通过输出流向客户端发送相应消息（5）关闭相关资源</p>
<pre><code>//基于TCP协议的Socket通信，实现用户登录，服务端
//创建一个服务器端Socket，即ServerSocket，指定绑定的端口，并监听此端口
ServerSocket serverSocket= newServerSocket(10086);
//调用accept方法开始监听，等待客户端的连接
Socket socket=serverSocket.accept();
//获取输入流，并读取客户端信息
InputStream is=socket.getInputStream();
InputStreamReader isr=new InputStreamReader(is);
BufferedReader br=new BufferedReader(isr);
String info=null;
while((info=br.readLine())!=null){
    System.out.println(&quot;我是服务器，客户端说：&quot;+info)；
}
socket.shutdownInput();//关闭输入输出流
//4.获取输出流，相应客户端的请求
OutputStream os= socket.getOutputStream();
PrintWriter pw=new PrintWriter(os);
pw.write(&quot;欢迎你！&quot;);
pw.flush();
//5.关闭资源
pw.close();
os.close();
br.close();
isr.close();
is.close();
socket.close();
serverSocket.close();
</code></pre><p>5.客户端<br>（1）创建Socket对象，指明需要连接的服务器地址和端口号（2）连接建立后，通过输出流向服务器发送请求信息（3）通过输入流获取服务器相应的信息（4）关闭相应资源</p>
<pre><code>//客户端
//创建客户端Socket，指定服务器地址和端口
Socket socket =new Socket(&quot;localHost&quot;,10086);
//获取输出流，向服务器发送消息
OutputStream  os=new OutputStream();//字节流输出
PrintWriter pw=new PrintWriter(os);//将输出流包装成打印流。
pw.writer(&quot;用户名：admin，密码：123&quot;);
pw.flush();
socket.shutdownOutput();
//获取输入流，并读取服务器短的响应信息
InputStream in=socket.getInputStream();
BufferedReader br=new BufferedReader(new InputStreamReader(is));
String info=null;
while((info=br.readLine())!=null){
  System.out.println(&quot;我是客户端，服务器说：&quot;+info);
}
br.close();
is.close();
pw.close();
os.close();
socket.close();
</code></pre><p>6.应用多线程实现服务器与客户端之间的通信<br>（1）服务器端创建ServerSocket，循环调用accept()等待客户端连接（2）客户端创建一个socket并请求和服务器端连接（3）服务器接受客户端请求，创建socket与该客户端建立专线连接（4）建立连接的两个socket在一个单独的线程上对话（5）服务器端继续等待新的连接</p>
<pre><code>//服务器线程处理
//和本线程相关的socket
Socket socket=null;
public serverThread(Socket socket){
  this.socket=socket;
}
public void run(){
  //服务器处理代码
}
//服务器代码
ServerSocket serverSocket=new ServerSocket(10086);
Socket socket=null;
int count=0;//记录客户端的数量
while(true){
  socket=serverSocket.accept();
  ServerSocket serverThread=new ServerThread(socket);
  serverThread..start();
  count++;
  System,out,println(&quot;客户端连接数量：&quot;+count);
}
</code></pre><p>五.UDP编程<br>UDP协议（用户数据报协议）是无连接的，不可靠的，无序的，速度快<br>进行数据传输时，首先将要传输的数据定义成数据报，大小限制在64k，在数据报中指明数据所要达到的Socket（主机地址和端口号），然后再将数据报发送出去。<br>DatagramPacket类：表示数据包<br>DatagramSocket类：进行端到端通信的类<br>1.服务器端实现步骤：<br>（1）创建DatagreamSocket,指定端口号（2）创建DatagramPacket（3）接受客户端发送的数据信息<br>（4）读取数据</p>
<pre><code>//服务器端，实现基于UDP的用户登录
//创建服务器端的DatagramSocket,指定端口号
DatagrameSocket socket=new DatagrameSocket(10010);
//创建数据报，用于接受客户端发送的数据报
byte[] data=new byte[1024];
DatagramePacket packet=new DatagramePacket(dtat,data.length);
//接受客户端发送的数据
socket.receive(packet);//此方法在接受数据报之前会一直阻塞
String info=new String(data,0,data.length);
System.out.println(&quot;我是服务器，客户端告诉我&quot;+info);

//向客户端响应数据
//1.定义客户端的地址，端口号，数据
InetAddress address=packet.getAddress();
int port=packet.getPort();
byte[] data2=&quot;欢迎您&quot;.getBytes();
//创建数据报，包含响应的数据信息
DatagramPacket packet2=new DatagramPacket(data2,data2.length,address,port);
//响应客户端
socket.send(packet2);
//关闭资源
socket.close();
</code></pre><p>2.客户端实现步骤<br>    (1)定义发送信息（2）创建DatagramPacket,包含将要发送的信息<br>    （3）创建DatagramSocket（4）发送数据</p>
<pre><code>//客户端
//可以服务器的地址，端口号，数据
InetAddress address=InetAddress.getByName(&quot;localhost&quot;);
int port=10010;
byte[] data==&quot;用户名：admin；密码：123&quot;.getBytes();
//创建数据报，包含发送的数据信息
DatagramPacket packet=new DatagramPacket(data,data.length,address,port);
//创建DatagramSocket 对象
DatagramSocket socket=new DatagramSocket();
//4向服务器发送数据
socket.send(packet);

//接受服务器端响应的数据报
//创建数据报，用于接受服务器端响应的数据
byte[] data2=new byte[1024];
DatagramPacket  packet2=new DatagramePacket(data2,data2.length);
//接受服务器相应的数据
socket.receive(packet2);
String raply=new String(data2,0,packet.getLength());
Systen.out.println(&quot;我是客户端，服务器说：&quot;+raply);
socket.close();
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/14/java-Socket编程/" data-id="cjuajt8420008fcamqrvwufzg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/01/14/‘Netty指南/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ‘Netty指南
        
      </div>
    </a>
  
  
    <a href="/2019/01/07/计算机网络/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">计算机网络</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    <!-- Featured Tags -->

  
    <!-- Short About -->
<section class="visible-md visible-lg">
    <h5><a href="/about/">ABOUT ME</a></h5>
    <div class="short-about">

        

        

        <!-- SNS Link -->
        <ul class="list-inline">
            
            
            

            

            

            
            
            
            
        </ul>
    </div>
</section>

  
    
  <h5>RECENT POSTS
  <div class="widget">
    <ul>
      
        <li>
          <a href="/2019/04/08/动态代理/">(no title)</a>
        </li>
      
        <li>
          <a href="/2019/04/08/springAOP/">(no title)</a>
        </li>
      
        <li>
          <a href="/2019/03/25/dubbo/">(no title)</a>
        </li>
      
        <li>
          <a href="/2019/03/22/操作系统_存储器管理和虚拟存储器/">(no title)</a>
        </li>
      
        <li>
          <a href="/2019/03/21/操作系统_处理机的调度与死锁/">(no title)</a>
        </li>
      
    </ul>
  </div>
</h5>
  
    <!-- Friends Blog -->

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="/js/script.js"></script>

  </div>
</body>
</html>